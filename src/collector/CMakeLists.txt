add_executable(mastermind-collector
    Discovery.cpp Node.cpp Parser.cpp Host.cpp
    StatsParser.cpp Metrics.cpp
    Storage.cpp Group.cpp Couple.cpp
    ConfigParser.cpp WorkerApplication.cpp CocaineHandlers.cpp
    FS.cpp FilterParser.cpp Backend.cpp Inventory.cpp
    Filter.cpp Round.cpp Collector.cpp Job.cpp main.cpp)

target_link_libraries(mastermind-collector
    ${elliptics_cpp_LIBRARY} ${elliptics_client_LIBRARY}
    ${CocaineNative_LIBRARIES} ${Cocaine_LIBRARY}
    ${CURL_LIBRARIES} boost_system boost_thread msgpack rt
     dispatch pthread_workqueue kqueue ev mongoclient dl)

add_custom_target(tarball ALL
    COMMAND tar czf mastermind-collector.tar.gz mastermind-collector
    DEPENDS mastermind-collector)
